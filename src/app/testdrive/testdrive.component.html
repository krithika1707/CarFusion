
<div class="back-button" style="position: absolute; top: 20px; left: 20px; z-index: 1; cursor: pointer;">
  <i class="bi bi-chevron-double-left" (click)="goBack()" style="font-size: 2rem; color: #2c3e50;"></i>
</div>

<div>
  <h1>Select Car Model</h1>
  <div class="tabs">
    <div
      *ngFor="let segment of response"
      class="tab"
      [class.active]="selectedSegment === segment.segment_id"
      (click)="onSelectSegment(segment.segment_id)">
      {{ segment.segment }}
    </div>
  </div>
 
  <div *ngIf="selectedSegmentDetails">
    <p>{{ selectedSegmentDetails.description }}</p>
    <ul>
      <li *ngFor="let model of selectedSegmentDetails.models">
        {{ model }}
      </li>
    </ul>
  </div>
 
  <div *ngIf="models.length > 0" class="car-models-container">
    <div class="car-models-list">
      <div *ngFor="let car of models" class="car-card">
        <div class="car-image">
          <img [src]="car.car_image" alt="{{ car.car_name }}" />
        </div>
 
        <div class="car-details">
          <h2>{{ car.car_name }}</h2>
 
          <div class="date">
            <strong>Select the Date:</strong>
            <input type="date" [min]="mindate" [(ngModel)]="selectedDates[car.testdrive_id]" />
          </div>
 
          <!-- <div *ngIf="selectedDates[car.testdrive_id]" class="time-slots">
            <strong>Available Test Drive Slots:</strong>
            <select [(ngModel)]="selectedSlots[car.testdrive_id]">
              <option *ngFor="let slot of car.time_slots" [value]="slot">
                {{ slot }}
              </option>
            </select>
          </div>
  -->


  <div *ngIf="selectedDates[car.testdrive_id]" class="time-slots-container">
    <h5>Available Slots:</h5>
    <div class="slot-buttons">
      <button
        *ngFor="let slot of car.time_slots"
        [ngClass]="{'selected': selectedSlots[car.testdrive_id] === slot}"
        (click)="selectSlot(slot, car.testdrive_id)">
        {{ slot }}
      </button>
    </div>
  </div>

          <button
            class="book-btn"
            [disabled]="!selectedDates[car.testdrive_id] || !selectedSlots[car.testdrive_id]"
            (click)="bookTestDrive(car)"
          >
            Book Test Drive
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="isModalOpen" class="modal-overlay">
  <div class="modal-content">
    <h2>Booking Confirmation</h2>
    <div class="modal-body">
      <h3>Booked Cars:</h3>
      <div class="modal-car-list">
        <div *ngFor="let booking of bookings" class="modal-car-item">
          <div class="modal-car-container">
            <img [src]="booking.car_image" alt="car image" class="modal-car-image">
            <div class="modal-car-details">
              <p>Model: <strong>{{ booking.car_name }}</strong></p>
              <p>Segment: <strong>{{ booking.segment }}</strong></p>
              <p>Date: <strong>{{ booking.date | date }}</strong></p>
              <p>Time: <strong>{{ booking.time }}</strong></p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <button (click)="closeModal()">Close</button>
  </div>
</div>


 